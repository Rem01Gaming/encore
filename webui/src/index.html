<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="styles/index.css" type="text/css" rel="stylesheet" />
    <script type="module" src="scripts/webui_utils.js"></script>
    <script type="module" src="scripts/block_copy.js"></script>
    <script type="module" src="scripts/language.js"></script>
  </head>

  <body class="bg-surface flex justify-center min-h-screen root_layout">
    <main class="p-3 text-sm w-full max-w-2xl">
      <!-- Header -->
      <div class="flex justify-between items-center mb-6 text-on-surface">
        <h1 class="text-lg font-semibold">Encore Tweaks</h1>
        <div>
          <select id="languageSelector" class="select select-sm bg-surface-container text-on-surface">
            <option value="en">English</option>
            <option value="id">Indonesia</option>
            <option value="jv">Basa Jawa</option>
            <option value="ru">Русский</option>
            <option value="es">Español</option>
            <option value="nl">Nederlands</option>
            <option value="tl">Tagalog</option>
            <option value="da">Dansk</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="zh">简体中文</option>
            <option value="ms">Bahasa Melayu</option>
            <option value="pt">Português</option>
            <option value="ro">Română</option>
            <option value="fr">Français</option>
            <option value="tr">Türkçe</option>
            <option value="ja">日本語</option>
            <option value="th">ภาษาไทย</option>
            <option value="ko">한국어</option>
            <option value="vi">Tiếng Việt</option>
            <option value="hi">हिन्दी</option>
            <option value="ar">اَلْعَرَبِيَّةُ</option>
            <option value="pl">Polski</option>
          </select>
        </div>
      </div>

      <!-- Daemon Status -->
      <div class="bg-secondary-container mb-4 p-4 rounded-xl flex items-start justify-between text-on-secondary-container card_border">
        <div>
          <span id="daemon_status" class="text-lg font-semibold">Loading</span>
          <span id="daemon_pid" class="text-xs mt-3 block">One moment please...</span>
        </div>
        <img id="encore_logo" class="w-24 h-24" />
      </div>

      <!-- Device & Module Info -->
      <div class="bg-surface-container mb-4 p-4 rounded-xl text-on-surface card_border">
        <div class="py-2">
          <div class="flex items-center gap-2">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="text-primary">
              <path d="M12 3L14.0357 8.16153C14.2236 8.63799 14.3175 8.87622 14.4614 9.0771C14.5889 9.25516 14.7448 9.41106 14.9229 9.53859C15.1238 9.68245 15.362 9.77641 15.8385 9.96432L21 12L15.8385 14.0357C15.362 14.2236 15.1238 14.3175 14.9229 14.4614C14.7448 14.5889 14.5889 14.7448 14.4614 14.9229C14.3175 15.1238 14.2236 15.362 14.0357 15.8385L12 21L9.96432 15.8385C9.77641 15.362 9.68245 15.1238 9.53859 14.9229C9.41106 14.7448 9.25516 14.5889 9.0771 14.4614C8.87622 14.3175 8.63799 14.2236 8.16153 14.0357L3 12L8.16153 9.96432C8.63799 9.77641 8.87622 9.68245 9.0771 9.53859C9.25516 9.41106 9.41106 9.25516 9.53859 9.0771C9.68245 8.87622 9.77641 8.63799 9.96432 8.16153L12 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h3 data-i18n="moduleTitle" class="text-sm font-medium"></h3>
          </div>
          <span id="module_version" class="text-xs text-on-surface-variant block pl-7 mt-1"></span>
        </div>
        
        <div class="py-2">
          <div class="flex items-center gap-2">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" class="text-primary">
              <path d="M17.41,6.59L15,5.5l2.41-1.09L18.5,2l1.09,2.41L22,5.5l-2.41,1.09L18.5,9L17.41,6.59z M21.28,12.72L20.5,11l-0.78,1.72 L18,13.5l1.72,0.78L20.5,16l0.78-1.72L23,13.5L21.28,12.72z M16.24,14.37l1.94,1.47l-2.5,4.33l-2.24-0.94 c-0.2,0.13-0.42,0.26-0.64,0.37L12.5,22h-5l-0.3-2.41c-0.22-0.11-0.43-0.23-0.64-0.37l-2.24,0.94l-2.5-4.33l1.94-1.47 C3.75,14.25,3.75,14.12,3.75,14s0-0.25,0.01-0.37l-1.94-1.47l2.5-4.33l2.24,0.94c0.2-0.13,0.42-0.26,0.64-0.37L7.5,6h5l0.3,2.41 c0.22,0.11,0.43,0.23,0.64,0.37l2.24-0.94l2.5,4.33l-1.94,1.47c0.01,0.12,0.01,0.24,0.01,0.37S16.25,14.25,16.24,14.37z M13,14 c0-1.66-1.34-3-3-3s-3,1.34-3,3s1.34,3,3,3S13,15.66,13,14z"/>
            </svg>
            <h3 data-i18n="profileTitle" class="text-sm font-medium"></h3>
          </div>
          <span id="encore_profile" class="text-xs text-on-surface-variant block pl-7 mt-1"></span>
        </div>
        
        <div class="py-2">
          <div class="flex items-center gap-2">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-primary">
              <path d="M4 18L10 12L4 6" />
              <path d="M12 18H20" stroke-miterlimit="10" />
            </svg>
            <h3 data-i18n="kernelTitle" class="text-sm font-medium"></h3>
          </div>
          <span id="kernel_version" class="text-xs text-on-surface-variant block pl-7 mt-1"></span>
        </div>
        
        <div class="py-2">
          <div class="flex items-center gap-2">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" class="text-primary">
              <path opacity="0.4" d="M20 9V11.92L19.22 11.47C18.58 11.1 17.78 11.21 17.26 11.71C17.15 11.81 17.06 11.93 16.98 12.06L16.92 12.17C16.81 12.36 16.72 12.41 16.71 12.42C16.69 12.41 16.59 12.36 16.48 12.16L16.42 12.06C16.2 11.68 15.85 11.42 15.43 11.31C15 11.19 14.56 11.25 14.19 11.47L13.28 12C12.87 12.23 12.58 12.61 12.46 13.06C12.34 13.52 12.4 13.99 12.63 14.4C12.74 14.58 12.74 14.69 12.74 14.71C12.73 14.72 12.63 14.78 12.41 14.78C11.44 14.78 10.65 15.57 10.65 16.53V17.47C10.65 18.43 11.44 19.22 12.41 19.22C12.63 19.22 12.73 19.28 12.73 19.29C12.74 19.3 12.74 19.42 12.63 19.6C12.56 19.73 12.5 19.86 12.47 20H9C6.24 20 4 17.76 4 15V9C4 6.24 6.24 4 9 4H15C17.76 4 20 6.24 20 9Z" fill="currentColor"/>
              <path d="M17.2602 9.73999V11.71C17.1502 11.81 17.0602 11.93 16.9802 12.06L16.9202 12.17C16.8102 12.36 16.7202 12.41 16.7102 12.42C16.6902 12.41 16.5902 12.36 16.4802 12.16L16.4202 12.06C16.2002 11.68 15.8502 11.42 15.4302 11.31C15.0002 11.19 14.5602 11.25 14.1902 11.47L13.2802 12C12.8702 12.23 12.5802 12.61 12.4602 13.06C12.3402 13.52 12.4002 13.99 12.6302 14.4C12.7402 14.58 12.7402 14.69 12.7402 14.71C12.7302 14.72 12.6302 14.78 12.4102 14.78C11.4402 14.78 10.6502 15.57 10.6502 16.53V17.26H9.74023C8.09023 17.26 6.74023 15.91 6.74023 14.26V9.73999C6.74023 8.08999 8.09023 6.73999 9.74023 6.73999H14.2602C15.9102 6.73999 17.2602 8.08999 17.2602 9.73999Z" fill="currentColor"/>
              <path d="M9.06055 2.75V4H9.00055C8.50055 4 8.02055 4.07 7.56055 4.21V2.75C7.56055 2.34 7.89055 2 8.31055 2C8.72055 2 9.06055 2.34 9.06055 2.75Z" fill="currentColor"/>
              <path d="M12.75 2.75V4H11.25V2.75C11.25 2.34 11.59 2 12 2C12.41 2 12.75 2.34 12.75 2.75Z" fill="currentColor"/>
              <path d="M16.4492 2.75V4.21C15.9892 4.07 15.4992 4 14.9992 4H14.9492V2.75C14.9492 2.34 15.2892 2 15.6992 2C16.1092 2 16.4492 2.34 16.4492 2.75Z" fill="currentColor"/>
              <path d="M21.9991 8.30005C21.9991 8.72005 21.6691 9.05005 21.2491 9.05005H19.9991V9.00005C19.9991 8.50005 19.9291 8.01005 19.7891 7.55005H21.2491C21.6691 7.55005 21.9991 7.89005 21.9991 8.30005Z" fill="currentColor"/>
              <path d="M9.06055 20V21.25C9.06055 21.66 8.72055 22 8.31055 22C7.89055 22 7.56055 21.66 7.56055 21.25V19.79C8.02055 19.93 8.50055 20 9.00055 20H9.06055Z" fill="currentColor"/>
              <path d="M4.21 7.55005C4.07 8.01005 4 8.50005 4 9.00005V9.05005H2.75C2.34 9.05005 2 8.72005 2 8.30005C2 7.89005 2.34 7.55005 2.75 7.55005H4.21Z" fill="currentColor"/>
              <path d="M4 11.25V12.75H2.75C2.34 12.75 2 12.41 2 12C2 11.58 2.34 11.25 2.75 11.25H4Z" fill="currentColor"/>
              <path d="M4.21 16.45H2.75C2.34 16.45 2 16.11 2 15.7C2 15.28 2.34 14.95 2.75 14.95H4V15C4 15.5 4.07 15.99 4.21 16.45Z" fill="currentColor"/>
              <path opacity="0.4" d="M20.9904 15.53C20.3104 15.53 19.9204 15.19 19.9204 14.69C19.9204 14.49 19.9804 14.26 20.1204 14.02C20.4004 13.54 20.2304 12.92 19.7504 12.65L18.8404 12.12C18.4204 11.87 17.8804 12.02 17.6304 12.44L17.5704 12.54C17.0904 13.37 16.3104 13.37 15.8304 12.54L15.7704 12.44C15.5304 12.02 14.9804 11.87 14.5704 12.12L13.6504 12.65C13.3304 12.83 13.1404 13.17 13.1404 13.52C13.1404 13.69 13.1904 13.86 13.2804 14.02C13.4204 14.26 13.4904 14.49 13.4904 14.69C13.4904 15.19 13.0904 15.53 12.4104 15.53C11.8604 15.53 11.4004 15.98 11.4004 16.53V17.47C11.4004 18.02 11.8604 18.47 12.4104 18.47C13.0904 18.47 13.4904 18.81 13.4904 19.31C13.4904 19.51 13.4204 19.74 13.2804 19.98C13.0004 20.46 13.1704 21.08 13.6504 21.35L14.5704 21.88C14.9804 22.13 15.5304 21.98 15.7704 21.56L15.8304 21.46C16.3104 20.63 17.0904 20.63 17.5704 21.46L17.6304 21.56C17.8804 21.98 18.4204 22.13 18.8404 21.88L19.7504 21.35C20.0704 21.17 20.2604 20.83 20.2604 20.48C20.2604 20.31 20.2104 20.14 20.1204 19.98C19.9804 19.74 19.9204 19.51 19.9204 19.31C19.9204 18.81 20.3104 18.47 20.9904 18.47C21.5504 18.47 22.0004 18.02 22.0004 17.47V16.53C22.0004 15.98 21.5504 15.53 20.9904 15.53ZM16.7004 18.72C15.7504 18.72 14.9804 17.95 14.9804 17C14.9804 16.05 15.7504 15.28 16.7004 15.28C17.6504 15.28 18.4204 16.05 18.4204 17C18.4204 17.95 17.6504 18.72 16.7004 18.72Z" fill="currentColor"/>
              <path d="M18.4205 17C18.4205 17.95 17.6505 18.72 16.7005 18.72C15.7505 18.72 14.9805 17.95 14.9805 17C14.9805 16.05 15.7505 15.28 16.7005 15.28C17.6505 15.28 18.4205 16.05 18.4205 17Z" fill="currentColor"/>
            </svg>
            <h3 data-i18n="chipsetTitle" class="text-sm font-medium"></h3>
          </div>
          <span id="chipset_name" class="text-xs text-on-surface-variant block pl-7 mt-1"></span>
        </div>
        
        <div class="py-2">
          <div class="flex items-center gap-2">
            <svg viewBox="0 0 32 32" width="20" height="20" fill="currentColor" class="text-primary">
              <path d="M23.35 12.653l2.496-4.323c0.044-0.074 0.07-0.164 0.07-0.26 0-0.287-0.232-0.519-0.519-0.519-0.191 0-0.358 0.103-0.448 0.257l-0.001 0.002-2.527 4.377c-1.887-0.867-4.094-1.373-6.419-1.373s-4.532 0.506-6.517 1.413l0.098-0.04-2.527-4.378c-0.091-0.156-0.259-0.26-0.45-0.26-0.287 0-0.519 0.232-0.519 0.519 0 0.096 0.026 0.185 0.071 0.262l-0.001-0.002 2.496 4.323c-4.286 2.367-7.236 6.697-7.643 11.744l-0.003 0.052h29.991c-0.41-5.099-3.36-9.429-7.57-11.758l-0.076-0.038zM9.098 20.176c-0.69 0-1.249-0.559-1.249-1.249s0.559-1.249 1.249-1.249 1.249 0.559 1.249 1.249-0.559 1.249-1.249 1.249zM22.902 20.176c-0.69 0-1.249-0.559-1.249-1.249s0.559-1.249 1.249-1.249 1.249 0.559 1.249 1.249-0.559 1.249-1.249 1.249z"/>
            </svg>
            <h3 data-i18n="androidSDKTitle" class="text-sm font-medium"></h3>
          </div>
          <span id="android_sdk" class="text-xs text-on-surface-variant block pl-7 mt-1"></span>
        </div>
      </div>

      <!-- Settings -->
      <div class="bg-surface-container mb-4 p-4 rounded-xl text-on-surface card_border">
        <h2 data-i18n="settingsTitle" class="text-base font-semibold mb-2"></h2>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="dndGameplay"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="dnd_gameplay.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="dnd_switch" type="checkbox" class="peer sr-only" />
            <label for="dnd_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="liteMode"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="lite_mode.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="lite_mode_switch" type="checkbox" class="peer sr-only" />
            <label for="lite_mode_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="flex items-center justify-between py-1 mb-2">
          <div>
            <span data-i18n="deviceMitigation"></span>
            <button class="btn btn-circle btn-ghost btn-xs text-primary" onclick="device_mitigation.showModal()">
              <svg tabindex="0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-4 w-4 stroke-current">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </button>
          </div>
          <label class="relative inline-flex cursor-pointer items-center">
            <input id="device_mitigation_switch" type="checkbox" class="peer sr-only" />
            <label for="device_mitigation_switch" class="hidden"></label>
            <div class="peer h-6 w-11 rounded-full border border-outline bg-surface-variant after:absolute after:left-[2px] after:top-0.5 after:h-5 after:w-5 after:rounded-full after:border after:border-4 after:border-surface-variant after:bg-outline after:transition-all after:content-[''] peer-checked:border-primary peer-checked:bg-primary peer-checked:after:translate-x-full peer-checked:after:border-on-primary peer-checked:after:bg-on-primary"></div>
          </label>
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2" data-i18n="defaultCpuGov"></p>
          <select id="default_cpu_gov" class="select bg-primary text-xs text-on-primary w-full p-2">
            <option value="schedutil" selected>schedutil</option>
          </select>
        </div>

        <div class="py-1 mb-2">
          <p class="mb-2" data-i18n="powersaveCpuGov"></p>
          <select id="powersave_cpu_gov" class="select bg-primary text-xs text-on-primary w-full p-2">
            <option value="powersave" selected>powersave</option>
          </select>
        </div>
      </div>

      <!-- Actions -->
      <div class="bg-surface-container mb-4 p-4 rounded-xl card_border">
        <h2 data-i18n="actionsTitle" class="text-base font-semibold mb-4 text-on-surface"></h2>
        <button id="edit_gamelist_btn" class="btn btn-block bg-primary hover:bg-primary text-on-primary py-1 mb-2" onclick="edit_gamelist.showModal()"></button>
        <button id="create_shortcut_btn" class="btn btn-block bg-primary hover:bg-primary text-on-primary py-1 mb-2"></button>
        <button id="save_log_btn" class="btn btn-block bg-primary hover:bg-primary text-on-primary py-1 mb-2"></button>
      </div>

      <!-- Donate Button -->
      <button id="donate_btn" class="text-left text-on-surface bg-surface-container mb-4 p-4 rounded-xl w-full active:bg-secondary-container transition duration-300 card_border">
        <h2 data-i18n="supportTitle" class="text-base font-semibold px-2 mb-1"></h2>
        <p data-i18n="supportDescription" class="text-sm text-on-surface-variant px-2 mb-1"></p>
      </button>

      <!-- Modals -->
      <dialog id="dnd_gameplay" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="dndTitle" class="text-lg font-bold"></h3>
          <p data-i18n="dndDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="lite_mode" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="liteModeTitle" class="text-lg font-bold"></h3>
          <p data-i18n="liteModeDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="device_mitigation" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="deviceMitigationTitle" class="text-lg font-bold"></h3>
          <p data-i18n="deviceMitigationDesc" class="py-4"></p>
        </div>
      </dialog>

      <dialog id="edit_gamelist" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 data-i18n="editGamelistTitle" class="text-lg font-bold"></h3>
          <p data-i18n="editGamelistDesc" class="py-4"></p>
          <textarea id="gamelist_textarea" class="w-full p-2 text-sm text-on-surface bg-surface-dim border border-primary outline-none shadow-none rounded-md resize-none mb-2" rows="14"></textarea>
          <form method="dialog">
            <button id="save_gamelist_btn" class="btn btn-block btn-sm bg-primary text-on-primary font-normal mb-2 hover:bg-primary duration-300" data-i18n="saveChanges"></button>
            <button class="btn btn-block btn-sm bg-secondary-container text-on-secondary-container font-normal hover:bg-secondary-container duration-300" data-i18n="cancelChanges"></button>
          </form>
        </div>
      </dialog>

      <dialog id="error_modal" class="modal">
        <div class="modal-box bg-surface-container text-on-surface card_border">
          <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
          </form>
          <h3 id="error_title" class="text-lg font-bold"></h3>
          <p id="error_msg" class="py-4"></p>
        </div>
      </dialog>
    </main>
  </body>
</html>